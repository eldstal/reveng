!function(a){define(function(require,b,c){function d(b,c){var d=this;d.options=a.extend({},l,c),d.e=a(b).empty().append(i).translation(),d.init()}function e(b){var c=a(b.target);c.siblings(".current").removeClass("current"),c.addClass("current");var d=c.attr("data-for")-0,e=c.attr("id");g(e),h.SetFeInstallMode(d),a("#fisheyeOCX_playMode li:first").click()}function f(b){var c=a(b.target);c.siblings(".current").removeClass("current"),c.addClass("current");var d=c.attr("data-for")-0;h.SetFeShowMode(d),0==d?this.options.openIVS():this.options.closeIVS()}function g(b){a("#fisheyeOCX_playMode li").each(function(c,d){a(d).attr("support-for").indexOf(b)>-1?a(d).show():a(d).hide()})}var h=require("../plugin"),i=require("./fishEye.html"),j=require("../ability"),k=require("../rpc"),l=null;a.fn.fishEye=function(){var b=arguments[0],c=2<=arguments.length?Array.prototype.slice.call(arguments,1):[],e=this;return this.each(function(){var f=a(this),g=f.data("fishEye");if(g||f.data("fishEye",g=new d(f,b)),"string"===a.type(b)&&a.isFunction(g[b])){var h=g[b].apply(g,c);if(void 0!==h)return e=h,!1}}),e},d.prototype.init=function(){var a=this;h.LoadFisheyeModule(),j.get("VideoInputCapsEx").done(function(b){a.fishEyeType=b.VideoInFishEye.Type,"180CeilMode"==b.VideoInFishEye.MountMode[0]&&(a.$("#WallMode").addClass("current"),a.$("#fisheyeOCX_fitMode, .fisheye_fit").hide())}),a.$("#fisheyeOCX_fitMode").delegate("li","click",e),a.$("#fisheyeOCX_playMode").delegate("li","click",function(b){f.call(a,b)})},d.prototype.render=function(){var a=this;k.ConfigManager.getConfig("VideoInOptions").done(function(b){a.config=b[0].FishEye,"Original"==a.config.CalibrateMode?(h.ControlFe(!0),a.renderPlugin()):a.renderChip()})},d.prototype.renderPlugin=function(){var a=this,b=a.$("#fisheyeOCX_fitMode li.current");b.length||(b=a.$("#fisheyeOCX_fitMode li[data-for = "+a.config.PlaceHolder+"]")),b.click()},d.prototype.renderChip=function(){},d.prototype.leave=function(){var a=this;"Original"==a.config.CalibrateMode&&(h.ControlFe(!1),a.options.openIVS())},d.prototype.$=function(a){return this.e.find(a)},c.exports=d})}(jQuery);