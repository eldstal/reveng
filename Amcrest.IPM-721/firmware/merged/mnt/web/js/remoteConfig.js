!function(a){define(function(require,a,b){b.exports=require("jsCore/pageTab")}),define("remote",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=require("jsCore/ability"),g=null,h={},i={},j={},k=null;c.exports=e.extend({init:function(){g=this,k=g.$("#remote_WirelessAlarm"),g.$("#remote_custom").numberfield({min:10,max:300,allowDecimal:!1,allowNegative:!1}),d.ConfigManager.getDefault("RemoteCtrl.RemoteCtrlInfo").done(function(a){h=a}),g.render()},render:function(){k.empty(),f.get("WirelessAlarm").done(function(b){b&&a.each(b.AlarmInNum,function(a){k.append('<option value="'+a+'">'+(a+1)+"</option>")})}),1==g.$("[sel-for=onLearnChange]").val()?g.$("[btn-for=clearLearnConfig]").show():g.$("[btn-for=clearLearnConfig]").hide(),d.Alarm.getArmMode().done(function(b,c){j=c.params.armMode,"Arming"==j.Mode?(g.$("[sel-for=onArmChange]").val(1),-1==a.inArray(j.Delay,[10,30,60,180,300])?(g.$("[sel-for=onTimeChange]","#remote_customShow").show(),g.$("[sel-for=onTimeChange]").val("custom"),g.$("#remote_custom").val(j.Delay)):(g.$("#remote_customShow").hide(),g.$("[sel-for=onTimeChange]").show(),g.$("[sel-for=onTimeChange]").val(j.Delay))):"Disarming"==j.Mode&&(g.$("[sel-for=onArmChange]").val(2),g.$("#remote_customShow","[sel-for=onTimeChange]").hide())}),d.ConfigManager.getConfig("RemoteCtrl.RemoteCtrlInfo","ArmMode").done(function(a,b){i=b.params[0].params.table,j=b.params[1].params.table})},onLearnChange:function(){"1"===g.$("[sel-for=onLearnChange]").val()?(k.hide(),g.$("[btn-for=clearLearnConfig]").show()):(k.show(),g.$("[btn-for=clearLearnConfig]").hide())},onTimeChange:function(){"custom"==g.$("[sel-for=onTimeChange]").val()?(g.$("#remote_customShow").show(),g.$("#remote_custom").val(10)):g.$("#remote_customShow").hide()},onArmChange:function(){"1"===g.$("[sel-for=onArmChange]").val()?(g.$("[sel-for=onTimeChange]").show(),"custom"==g.$("[sel-for=onTimeChange]").val()&&g.$("#remote_customShow").show()):g.$("[sel-for=onTimeChange]","#remote_customShow").hide()},clearLearnConfig:function(){return h&&i?(a.each(h,function(a,b){i[a].Address=b.Address}),void d.ConfigManager.setConfig("RemoteCtrl.RemoteCtrlInfo",ExRemoteCtrlJsonInit).done(function(){g.tip("success","w_clearSuccess")}).fail(function(){g.tip("error","w_clearFailed")})):void g.tip("warning","w_stydyFail")},remoteLearnConfirm:function(){var a=g.$("[sel-for=onLearnChange]").val()-0,b=0;1!=a&&(b=g.$("#remote_WirelessAlarm").val()-0),d.Alarm.addressbinding(a,b).done(function(){g.tip("success","w_study")}).fail(function(){g.tip("error","w_stydyFail")})},remoteSetConfirm:function(){return j?"Arming"==j.Mode&&"1"===g.$("[sel-for=onArmChange]").val()?g.tip("warning","w_arming"):"Disarming"==j.Mode&&"2"===g.$("[sel-for=onArmChange]").val()?g.tip("warning","w_disarming"):(j.Mode="1"===g.$("[sel-for=onArmChange]").val()?"Arming":"Disarming",j.Delay="custom"!=g.$("[sel-for=onTimeChange]").val()?g.$("#remote_time").val()-0||10:g.$("#remote_custom").val()-0,void d.ConfigManager.setConfig("ArmMode",j).done(function(){g.tip("success","Operateingsuccess")}).fail(function(){g.tip("error","Operateingfailure")})):g.tip("warning","Operateingfailure")}})})}(jQuery);