!function(a){define(function(require,a,b){var c=require("jsCore/ability");b.exports=require("jsCore/pageTab"),b.exports.prototype.abnormal_sd=webApp.IsLocalStore,b.exports.prototype.abnormal_des=c.get("PTZCaps").then(function(a){return a&&a.PTZShake&&a.PTZShake.Support})}),define("abnormal_sd",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=require("common/common"),g=require("jsCore/modules/eventHandler"),h="NotExist",i={},j=null,k=null,l=!1;c.exports=e.extend({init:function(){j=this,k=new g("#ab_sd_event",{RecordEnable:!1,RecordLatch:!1,SnapshotEnable:!1,PtzLinkEnable:!1}),j.$("#ab_sd_limit").numberfield({min:0,max:99,allowDecimal:!1,allowNegative:!1}),j.render()},render:function(){l=!1;var b=j.$('[sel-for="onTypeChange"]');d.Storage.getDeviceAllInfo().done(function(c){a.each(c,function(a,c){return c.HealthDataFlag?(l=!0,b.empty().append('<option value="NotExist" t="w_No SD Card"></option><option value="Failure" t="w_SD Card Error"></option><option value="LowSpace" t="w_Fall short of SD card\'s area"></option>'),b.append('<option value="HealthAlarm" t="StorageHealthAlarm"></option>'),!1):void 0})}).always(function(){b.translation(),h="NotExist",j._getConfig(!1)})},_getConfig:function(a){var b=["StorageNotExist","StorageLowSpace","StorageFailure"];l&&b.push("StorageHealthAlarm"),d.ConfigManager.getConfig(b).done(function(b){f.chkMutilCallRet(b)?(j._getSDData(b),j._renderElements(),a&&j.tip("success","Operateingsuccess")):a&&j.tip("error","Operateingfailure")})},onTypeChange:function(a){j._savaSDData(),h=j.$(a.target).val(),j._renderElements()},onDefault:function(){var a=["StorageNotExist","StorageLowSpace","StorageFailure"];l&&a.push("StorageHealthAlarm"),d.ConfigManager.getDefault(a).done(function(a){f.chkMutilCallRet(a)?(j._getSDData(a),j._renderElements(),j.tip("success","Defaultsuccess")):j.tip("error","Defaultfailure")})},onRefresh:function(){j._getConfig(!0)},onConfirm:function(){j._savaSDData();var a=["StorageNotExist","StorageLowSpace","StorageFailure"],b=[i.NotExist,i.LowSpace,i.Failure];l&&(a.push("StorageHealthAlarm"),b.push(i.HealthAlarm)),d.ConfigManager.setConfig(a,b).done(function(a){f.chkMutilCallRet(a)?j.tip("success","Succeed in saving configure"):j.tip("error","Saving failure")})},_getSDData:function(a){i.NotExist=a[0].params.table,i.LowSpace=a[1].params.table,i.Failure=a[2].params.table,l&&(i.HealthAlarm=a[3].params.table)},_renderElements:function(){var a=i[h];j.$('[sel-for="onTypeChange"]').val(h),j.$("#ab_sd_enable").prop("checked",a.Enable),"LowSpace"===h?(j.$("#ab_sd_limit").parent().show(),j.$("#ab_sd_limit").numberfield("value",a.LowerLimit)):j.$("#ab_sd_limit").parent().hide(),k.set(a.EventHandler)},_savaSDData:function(){var a=i[h];a.Enable=j.$("#ab_sd_enable").prop("checked"),"LowSpace"===h&&(a.LowerLimit=j.$("#ab_sd_limit").numberfield("value")),a.EventHandler=k.get()}})}),define("abnormal_net",function(require,a,b){var c=require("jsCore/rpc"),d=require("jsCore/pageBase"),e=require("common/common"),f=require("jsCore/modules/eventHandler"),g="NetAbort",h={},i=null,j=null;b.exports=d.extend({init:function(){i=this,j=new f("#ab_net_event",{RecordEnable:webApp.IsLocalStore,RecordLatch:webApp.IsLocalStore,MailEnable:!1,SnapshotEnable:!1,PtzLinkEnable:!1}),i.render()},render:function(){i._getConfig(!1),$$("[data-page=abnormal_net]").getElementById("e_recordchn").addClass("fn-hide")},_getConfig:function(a){c.ConfigManager.getConfig(["NetAbort","IPConflict"]).done(function(b){i._getNetData(b),i._renderElements(),a&&i.tip("success","Operateingsuccess")}).fail(function(){a&&i.tip("error","Operateingfailure")})},onTypeChange:function(a){i._savaNetData(),g=i.$(a.target).val(),i._renderElements()},onDefault:function(){c.ConfigManager.getDefault(["NetAbort","IPConflict"]).done(function(a){i._getNetData(a),i._renderElements(),i.tip("success","Defaultsuccess")}).fail(function(){i.tip("error","Defaultfailure")})},onRefresh:function(){i._getConfig(!0)},onConfirm:function(){i._savaNetData(),c.ConfigManager.setConfig(["NetAbort","IPConflict"],[h.NetAbort,h.IPConflict]).done(function(a){e.chkMutilCallRet(a)?i.tip("success","Succeed in saving configure"):i.tip("error","Saving failure")})},_getNetData:function(a){h.NetAbort=a[0].params.table,h.IPConflict=a[1].params.table},_renderElements:function(){var a=h[g];i.$('[sel-for="onTypeChange"]').val(g),i.$("#ab_net_enable").prop("checked",a.Enable),j.set(a.EventHandler)},_savaNetData:function(){var a=h[g];a.Enable=i.$("#ab_net_enable").prop("checked"),a.EventHandler=j.get()}})}),define("abnormal_auth",function(require,b,c){var d=require("jsCore/rpc"),e=require("jsCore/pageBase"),f=require("common/common"),g=require("jsCore/modules/eventHandler"),h=null,i=null,j=null,k=null;c.exports=e.extend({init:function(){j=this,k=new g("#ab_auth_event",{RecordEnable:!1,RecordLatch:!1,SnapshotEnable:!1,PtzLinkEnable:!1}),j.$("#ab_auth_num").numberfield({min:3,max:30,allowDecimal:!1,allowNegative:!1}),webApp.GongAnDetect&&a("#lock_time").show(),j.render()},render:function(){j._getConfig(!1)},_getConfig:function(a){d.ConfigManager.getConfig(["General","LoginFailureAlarm"]).done(function(b){j._getNoAccessData(b),j._renderElements(),a&&j.tip("success","Operateingsuccess")}).fail(function(){a&&j.tip("error","Operateingfailure")})},onDefault:function(){d.ConfigManager.getDefault(["General","LoginFailureAlarm"]).done(function(a){j._getNoAccessData(a),j._renderElements(),j.tip("success","Defaultsuccess")}).fail(function(){j.tip("error","Defaultfailure")})},onRefresh:function(){j._getConfig(!0)},onConfirm:function(){i.Enable=j.$("#ab_auth_enable").prop("checked"),i.EventHandler=k.get(),h.LockLoginTimes=j.$("#ab_auth_num").numberfield("value"),h.LoginFailLockTime=j.$("#ab_auth_lockTime").val()-0,d.ConfigManager.setConfig(["General","LoginFailureAlarm"],[h,i]).done(function(a){f.chkMutilCallRet(a)?j.tip("success","Succeed in saving configure"):j.tip("error","Saving failure")})},_getNoAccessData:function(a){h=a[0].params.table,i=a[1].params.table},_renderElements:function(){isEnable("is_show_WatchNet")&&j.$("#ab_auth_num").parent().hide(),j.$("#ab_auth_enable").prop("checked",i.Enable),j.$("#ab_auth_num").numberfield("value",h.LockLoginTimes),j.$("#ab_auth_lockTime").val(h.LoginFailLockTime),k.set(i.EventHandler)}})}),define("abnormal_des",function(require,a,b){var c=require("jsCore/rpc"),d=require("jsCore/pageBase"),e=require("jsCore/modules/eventHandler"),f=null,g=null,h=null;require("widget/js/dui.slider"),b.exports=d.extend({init:function(){g=this,h=new e("#ab_des_event",{RecordEnable:!0,RecordLatch:!1,SnapshotEnable:!1,PtzLinkEnable:!1}),g.$("[data-slider]").slider({min:1,max:10,complete:function(a,b){var c=g.$(a.target).attr("data-slider");f[c]=b.value}}),g.render()},render:function(){g._getConfig(!1)},_getConfig:function(a){c.ConfigManager.getConfig("ShakeDetection").done(function(b){f=b,g._renderElements(),a&&g.tip("success","Operateingsuccess")}).fail(function(){a&&g.tip("error","Operateingfailure")})},onDefault:function(){c.ConfigManager.getDefault("ShakeDetection").done(function(a){f=a,g._renderElements(),g.tip("success","Defaultsuccess")}).fail(function(){g.tip("error","Defaultfailure")})},onRefresh:function(){g._getConfig(!0)},onConfirm:function(){f.Enable=g.$("#ab_des_enable").prop("checked"),f.EventHandler=h.get(),c.ConfigManager.setConfig("ShakeDetection",f).done(function(){g.tip("success","Succeed in saving configure")}).fail(function(){g.tip("error","Saving failure")})},_renderElements:function(){g.$("#ab_des_enable").prop("checked",f.Enable),g.$('[data-slider="Sensitivity"]').slider("value",f.Sensitivity),h.set(f.EventHandler)}})})}(jQuery);