!function(a){var b=/%$/;a.widget("dui.dialog",{version:"1.0.1",widgetName:"dialog",widgetEventPrefix:"dialog",options:{model:!0,mask:"body",confirm:a.noop,"default":a.noop,cancel:a.noop,beforeClose:a.noop},_create:function(){this._setupEvents()},_setupEvents:function(){this._on(this.handleEvents)},title:function(a){this.element.find(".u-dialog-head").find("h1").text(a)},show:function(b){var c,d,e=this.element.width(),f=this.element.height(),g=document.documentElement.clientWidth,h=document.documentElement.clientHeight;c=(h-f)/2,d=(g-e)/2,c=0>c?0:c,d=0>d?0:d,this._trigger("show",null,null),this.options.model&&a.mask(this.options.mask,b),this.element.show().css({top:c/h*100+"%",left:d/g*100+"%","z-index":10001})},setPosition:function(a){this.element.css({top:b.test(a[0])?a[0]:a[0]+"px",left:b.test(a[1])?a[1]:a[1]+"px"})},close:function(){this.options.model&&a.unmask(this.options.mask),this.element.hide(),this._trigger("close",null,null)},handleEvents:{"click [data-action]":function(b){var c=a(b.currentTarget).attr("data-action");switch(c){case"cancel":case"close":var d=this;if(d[c]){var e=d.options.beforeClose();a.isDeferred(e)?e.done(function(){d[c].apply(d)}):e!==!1&&d[c].apply(d)}break;default:this._trigger(c,null,{ui:this})}}}})}(jQuery),function(a){var b='<div class="u-dialog">                        <div class="u-dialog-head">                            <h1></h1>                            <i class="i-close" data-action="close"></i>                        </div>                        <div class="u-dialog-content"></div>                    </div>';a.dialog=function(b){return new a.dialog.init(b)},a.dialog.defaults={title:"",content:"",model:!0,mask:"body",closeable:!0},a.dialog.init=function(b){this.options=a.extend({},a.dialog.defaults,b),this.render(),this.events(),this.show()},a.dialog.prototype=a.dialog.init.prototype={render:function(){this.element=a(b),this.element.find(".u-dialog-head").find("h1").text(this.options.title),this.element.find(".u-dialog-content").html(this.options.content);var c,d=this.options.buttons;if(d&&d.length){c='<div class="u-dialog-foot">';for(var e=0;e<d.length;e++)c+='<a class="u-button" data-btnIndex="'+e+'" wgt='+d[e].name+"></a>";c+="</div>",this.element.append(c).trans_wgt()}this.options.closeable||this.element.find(".i-close").hide(),this.element.appendTo(document.body)},close:function(){this.options.model&&a.unmask(this.options.mask),this.element.hide().remove()},show:function(){this.options.model&&a.mask(this.options.mask),this.element.css({"margin-top":"-"+this.element.height()/2+"px","margin-left":"-"+this.element.width()/2+"px","z-index":10001}).show()},events:function(){var b=this.options.buttons,c=this;this.element.on("click","[data-action=close]",function(){if(c.options.closeable){var d=c.options.iconIndex;b[d]&&a.isFunction(b[d].callback)&&b[d].callback.call(c)}}),this.element.on("click","[data-btnIndex]",function(d){var e=a(d.currentTarget).attr("data-btnIndex");b[e]&&a.isFunction(b[e].callback)&&b[e].callback.call(c)})}},a.confirm=function(b,c,d,e,f,g){a.dialog(a.extend({title:b,closeable:f,content:'<i class="i-dialog-warn"></i><span class="u-dialog-context">'+c+"</span>",buttons:[{name:"Yes",callback:function(){this.close(),a.isFunction(d)&&d()}},{name:"No",callback:function(){this.close(),a.isFunction(e)&&e()}}],iconIndex:1},g))},a.alert=function(b,c,d,e){a.dialog(a.extend({closeable:d,content:'<i class="i-dialog-warn"></i><span class="u-dialog-context">'+b+"</span>",buttons:[{name:"Yes",callback:function(){this.close(),a.isFunction(c)&&c()}}],iconIndex:0},e))}}(jQuery);